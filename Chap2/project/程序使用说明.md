## 通过心知天气API查询实时天气 
#### 1. 简要使用说明 
- 输入城市名称，返回该城市的天气、温度、湿度数据，城市名称可以是中文或者英文（国内城市支持拼音）；
- 输入help或者h,返回简要的帮助信息，即输入提示； 
- 输入history，返回已查询城市数据的历史记录；  
- 输入参数的不在以上之列，则返回“not exist”,并且这条记录不会加入到history里面。  

#### 2. 编程逻辑 
Ch1是从固定TXT数据中，返回天气，实现逻辑比较简单。即，（步骤一）构建城市天气对应数据的字典-->输入城市查询字典数值;(步骤二)用if语句判断不同的输入值-->返回不同的结果，判断输入是字典的关键字，调用步骤一否则返回其他。  
Ch2要求从API调用城市的天气相关的多种数据，与Ch1的思路基本相同，只不过（步骤一）发生了变化：    
- a.Ch2城市数据是API反馈的变动数据;       
理论上，沿用Ch1的思路也可以，构建一个全集的字典然后判断，但问题在于这个数据库内容庞大，调用全集作为字典浪费资源而且时效茶。因此，只需要把API返回的数据存在字典即可。解决a难点不在于字典调用，而是接入API，这里需要利用到request方法。
- b.ch2需要反馈的数据是多维的.       
无论多少维的数据，作为文本格式都可以用```+```连接到一起，形成一个字典值。   
总结,Ch2的逻辑是：（步骤一）通过request调用API查询输入城市的相关数据-->以上函数单独作为一个文件w2_test.py;(步骤二)用if语句判断不同的输入值-->返回不同的结果，判断输入是城市名，调用步骤一的函数，并计入history字典，其他则返回相应数据。

#### 3. 版本记录 
- v1:
 文件<w2_test.py>单独储存request方法调用城市数据的函数，主文件w2.py引入w2_test模块的函数，并用if语句分情况讨论，适时的调用w2_test的函数。如果录入数据无效，通过 try except语句，打印“not exist”的结果。
 
- to be continued:

#### 4. 后续待改进
- request调用API的方法     
我直接采用心知天气提供的代码demo，用request.Request、request.urlopen方法，并没有用到json，导致我对返回的数据解码，花费了很多时间，多次用到split和list试验才获取所要的数据，此处应该后续要改进。
- try except的错误返回     
我用到try except解决输入参数无效的问题，看教练对Ch1的点评，建议except语句最好写出具体的错误类型。我的脚本跑出来，提示错误httpError,error code =404,但用试了except加入多种错误类型KeyError，ValueError，HTTPError都无效，无奈只能放弃直接在except后加冒号了事。  
这个问题还有待研究，不过语句我用json改了第一个问题，这个就不存在了。
